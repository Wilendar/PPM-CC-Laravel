[2025-10-15 06:33:27] production.DEBUG: CategoryPicker: Building tree node {"category_id":61,"name":"TEST-PPM","parent_id":60,"level":1,"has_children":false} 
[2025-10-15 06:33:27] production.DEBUG: CategoryPicker: Building tree node {"category_id":60,"name":"Buggy","parent_id":null,"level":0,"has_children":true} 
[2025-10-15 06:33:27] production.DEBUG: CategoryPicker: Building tree node {"category_id":59,"name":"Kayo","parent_id":null,"level":0,"has_children":false} 
[2025-10-15 06:33:29] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":155} 
[2025-10-15 06:33:29] production.DEBUG: CategoryPicker: Building tree node {"category_id":61,"name":"TEST-PPM","parent_id":60,"level":1,"has_children":false} 
[2025-10-15 06:33:29] production.DEBUG: CategoryPicker: Building tree node {"category_id":60,"name":"Buggy","parent_id":null,"level":0,"has_children":true} 
[2025-10-15 06:33:29] production.DEBUG: CategoryPicker: Building tree node {"category_id":59,"name":"Kayo","parent_id":null,"level":0,"has_children":false} 
[2025-10-15 06:33:30] production.DEBUG: CategoryPreviewModal: Resolution option selected {"option":"manual","product_id":10969} 
[2025-10-15 06:33:30] production.DEBUG: CategoryPicker: Building tree node {"category_id":61,"name":"TEST-PPM","parent_id":60,"level":1,"has_children":false} 
[2025-10-15 06:33:30] production.DEBUG: CategoryPicker: Building tree node {"category_id":60,"name":"Buggy","parent_id":null,"level":0,"has_children":true} 
[2025-10-15 06:33:30] production.DEBUG: CategoryPicker: Building tree node {"category_id":59,"name":"Kayo","parent_id":null,"level":0,"has_children":false} 
[2025-10-15 06:36:57] production.DEBUG: JobProgressBar: Progress fetched {"job_id":223,"progress":{"status":"pending","message":"Oczekiwanie... Test KAYO","current":0,"total":1,"percentage":0.0,"errors":[],"shop_name":"Test KAYO","job_id":"068d2866-bf1e-46a5-bfa0-4303e2f507b6","pending_conflicts":[]}} 
[2025-10-15 06:37:00] production.INFO: ProductList: Pending CategoryPreview detected via polling {"preview_id":155,"job_id":"068d2866-bf1e-46a5-bfa0-4303e2f507b6","shop_id":5,"total_categories":0} 
[2025-10-15 06:37:00] production.DEBUG: CategoryPreview marked as shown {"preview_id":155,"shown_count":1} 
[2025-10-15 06:37:00] production.INFO: üéØ CategoryPreviewModal::show() CALLED {"component_id":"hEx1evitg2EDyxEqDaT2","preview_id":155,"is_open_before":false,"public_methods_count":95,"has_approve_method":true,"has_selectAll_method":true,"has_close_method":true,"all_public_methods":{"0":"show","1":"close","2":"toggleConflicts","3":"toggleCategory","4":"isCategorySelected","5":"selectAll","6":"deselectAll","7":"toggleSkipCategories","8":"approve","9":"approveSkipCategories","10":"showCreateCategoryForm","11":"hideCreateCategoryForm","12":"createQuickCategory","14":"openConflictResolution","15":"closeConflictResolution","16":"selectResolutionOption","17":"confirmConflictResolution","18":"resolveConflictOverwrite","19":"resolveConflictKeep","20":"resolveConflictManual","21":"resolveConflictCancel","22":"reject","23":"checkExistingCategories","24":"markExistingInTree","25":"extractNewCategoryIds","26":"extractAllCategoryIds","27":"loadCategoryMappingInfo","29":"detectCategoryConflicts","31":"extractAndMapCategories","32":"extractPrestaShopCategoryIds","33":"mapCategoryIdsToNames","34":"mapPrestaShopCategoryIdsToNames","35":"render","36":"id","37":"setId","39":"setName","41":"skipRender","42":"skipMount","43":"skipHydrate","48":"tap","49":"macro","50":"mixin","51":"hasMacro","52":"flushMacros","54":"macroCall","55":"authorize","56":"authorizeForUser","57":"parseAbilityAndArguments","58":"normalizeGuessedAbilityName","59":"authorizeResource","60":"resourceAbilityMap","61":"resourceMethodsWithoutModels","62":"hasProperty","64":"fill","65":"reset","66":"resetExcept","67":"pull","68":"only","69":"except","70":"all","72":"dispatch","73":"redirect","74":"redirectRoute","75":"redirectIntended","76":"redirectAction","77":"stream","79":"setPropertyAttribute","80":"mergeOutsideAttributes","81":"addRulesFromOutside","82":"addMessagesFromOutside","83":"addValidationAttributesFromOutside","85":"addError","86":"setErrorBag","87":"resetErrorBag","88":"clearValidation","89":"resetValidation","90":"errorBagExcept","95":"rulesForModel","96":"hasRuleFor","97":"ruleWithNumbersReplacedByStars","98":"missingRuleFor","99":"withValidator","100":"checkRuleMatchesProperty","101":"validate","102":"isRootComponent","103":"withFormObjectValidators","104":"validateOnly","105":"filterCollectionDataDownToSpecificKeys","107":"shortenModelAttributesInsideValidator","108":"providedOrGlobalRulesMessagesAndAttributes","110":"unwrapDataForValidation","111":"prepareForValidation","113":"js","115":"disableBackButtonCache","116":"enableBackButtonCache"}} 
[2025-10-15 06:37:00] production.INFO: CategoryPreviewModal: Checking existing categories {"shop_id":5,"existing_count":3,"existing_ids":[2,135,154]} 
[2025-10-15 06:37:00] production.INFO: üîç CategoryPreviewModal: detectCategoryConflicts() CALLED {"preview_id":155,"has_import_context":true,"import_context":{"mode":"individual","options":{"product_ids":[4017]}}} 
[2025-10-15 06:37:00] production.INFO: CategoryPreviewModal: Fetching products to check {"mode":"individual","options":{"product_ids":[4017]}} 
[2025-10-15 06:37:00] production.INFO: CategoryPreviewModal: Checking conflicts for products {"shop_id":5,"mode":"individual","product_count":1} 
[2025-10-15 06:37:00] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/products/4017","status_code":200,"execution_time_ms":50.23,"request_size_bytes":2,"response_size_bytes":949,"timestamp":"2025-10-15T06:37:00+00:00"} 
[2025-10-15 06:37:00] production.DEBUG: CategoryPreviewModal: Skipping PrestaShop root category {"prestashop_category_id":2} 
[2025-10-15 06:37:00] production.DEBUG: CategoryPreviewModal: Category not mapped (would be auto-imported) {"prestashop_category_id":135,"shop_id":5} 
[2025-10-15 06:37:00] production.DEBUG: CategoryPreviewModal: Category not mapped (would be auto-imported) {"prestashop_category_id":154,"shop_id":5} 
[2025-10-15 06:37:00] production.INFO: CategoryPreviewModal: Categories extracted and mapped {"prestashop_product_id":4017,"shop_id":5,"prestashop_category_count":3,"mapped_ppm_category_count":0,"ppm_category_ids":[]} 
[2025-10-15 06:37:00] production.INFO: üì¶ CategoryPreviewModal: Product categories after mapping {"prestashop_product_id":4017,"raw_ps_categories":[2,135,154],"mapped_ppm_categories":[]} 
[2025-10-15 06:37:00] production.INFO: ‚úÖ CategoryPreviewModal: Product found by SKU {"prestashop_product_id":4017,"sku":"PPM-TEST","ppm_product_id":10969,"existing_shop_id":1,"importing_to_shop_id":5,"scenario":"CROSS_SHOP_IMPORT"} 
[2025-10-15 06:37:00] production.DEBUG: CategoryPreviewModal: No categories mapped - will check default categories for conflicts {"prestashop_product_id":4017,"ppm_product_id":10969,"existing_shop_id":1} 
[2025-10-15 06:37:00] production.INFO: üîç CategoryPreviewModal: Comparing categories (using mapped PPM IDs) {"product_id":10969,"sku":"PPM-TEST","mapped_ppm_categories":[],"ppm_default_categories":[42,57,58],"ppm_shop_categories":[]} 
[2025-10-15 06:37:00] production.INFO: üîç CategoryPreviewModal: Category comparison results {"product_id":10969,"mapped_ppm_categories":[],"default_categories":[42,57,58],"shop_categories":[],"raw_ps_categories":[2,135,154],"has_default_conflict":true,"has_shop_conflict":false,"has_unmapped_categories":true,"has_conflict":true} 
[2025-10-15 06:37:00] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/2","status_code":200,"execution_time_ms":31.44,"request_size_bytes":2,"response_size_bytes":29246,"timestamp":"2025-10-15T06:37:00+00:00"} 
[2025-10-15 06:37:00] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":2,"name":"Kayo"} 
[2025-10-15 06:37:00] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/135","status_code":200,"execution_time_ms":31.45,"request_size_bytes":2,"response_size_bytes":324,"timestamp":"2025-10-15T06:37:00+00:00"} 
[2025-10-15 06:37:00] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":135,"name":"Buggy"} 
[2025-10-15 06:37:00] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/154","status_code":200,"execution_time_ms":34.39,"request_size_bytes":2,"response_size_bytes":276,"timestamp":"2025-10-15T06:37:00+00:00"} 
[2025-10-15 06:37:00] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":154,"name":"TEST-PPM"} 
[2025-10-15 06:37:00] production.INFO: CategoryPreviewModal: Mapped PrestaShop category IDs to names {"shop_id":5,"category_count":3,"names":["Kayo","Buggy","TEST-PPM"]} 
[2025-10-15 06:37:01] production.WARNING: üö® CategoryPreviewModal: CONFLICT DETECTED! {"product_id":10969,"sku":"PPM-TEST","name":"TEST PPM","import_will_assign":[],"current_default":[42,57,58],"current_shop":[],"raw_ps_categories":[2,135,154],"has_default_conflict":true,"has_shop_conflict":false,"has_unmapped_categories":true} 
[2025-10-15 06:37:01] production.INFO: CategoryPreviewModal: Conflict detection complete {"conflicts_found":1} 
[2025-10-15 06:37:01] production.INFO: CategoryPreviewModal: Opened successfully {"preview_id":155,"shop_name":"Test KAYO","total_categories":0,"selected_count":0,"conflicts_detected":1} 
[2025-10-15 06:37:03] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":155} 
[2025-10-15 06:37:06] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":155} 
[2025-10-15 06:37:09] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":155} 
[2025-10-15 06:37:10] production.INFO: CategoryPreviewModal: JobProgress marked as failed (user rejected) {"job_progress_id":223,"job_id":"068d2866-bf1e-46a5-bfa0-4303e2f507b6"} 
[2025-10-15 06:37:10] production.INFO: CategoryPreviewModal: Preview rejected {"preview_id":155,"shop_id":5} 
[2025-10-15 06:37:10] production.INFO: CategoryPreviewModal: Closed  
[2025-10-15 06:38:36] production.INFO: ProductForm mount() called {"product_id":10969} 
[2025-10-15 06:38:36] production.INFO: CategoryManager initialized successfully {"categoryManager_exists":true,"categoryManager_type":"App\\Http\\Livewire\\Products\\Management\\Services\\ProductCategoryManager","product_id":10969} 
[2025-10-15 06:38:36] production.DEBUG: loadProductData: About to load categories {"product_id":10969,"categoryManager_exists":true,"shopCategories_before":[]} 
[2025-10-15 06:38:36] production.DEBUG: loadShopCategories: Raw data from allCategoriesGroupedByShop() {"product_id":10969,"default_count":3,"shops_keys":[1],"full_data":{"default":{"Illuminate\\Support\\Collection":[{"id":42,"parent_id":null,"name":"Pojazdy","slug":"pojazdy","description":null,"short_description":null,"level":0,"path":null,"sort_order":0,"is_active":true,"is_featured":false,"icon":null,"icon_path":null,"banner_path":null,"visual_settings":null,"visibility_settings":null,"default_values":null,"meta_title":null,"meta_description":null,"meta_keywords":null,"canonical_url":null,"og_title":null,"og_description":null,"og_image":null,"created_at":"2025-10-10T12:00:52.000000Z","updated_at":"2025-10-10T12:00:52.000000Z","pivot":{"product_id":10969,"category_id":42,"is_primary":0,"sort_order":1,"shop_id":null,"created_at":"2025-10-14T11:48:51.000000Z","updated_at":"2025-10-14T11:48:51.000000Z"}},{"id":57,"parent_id":42,"name":"Quad","slug":"quad","description":null,"short_description":null,"level":1,"path":"/42","sort_order":0,"is_active":true,"is_featured":false,"icon":null,"icon_path":null,"banner_path":null,"visual_settings":null,"visibility_settings":null,"default_values":null,"meta_title":null,"meta_description":null,"meta_keywords":null,"canonical_url":null,"og_title":null,"og_description":null,"og_image":null,"created_at":"2025-10-13T08:58:29.000000Z","updated_at":"2025-10-13T08:58:29.000000Z","pivot":{"product_id":10969,"category_id":57,"is_primary":0,"sort_order":2,"shop_id":null,"created_at":"2025-10-14T11:48:51.000000Z","updated_at":"2025-10-14T11:48:51.000000Z"}},{"id":58,"parent_id":42,"name":"TEST PPM","slug":"test-ppm","description":null,"short_description":null,"level":1,"path":"/42","sort_order":8,"is_active":true,"is_featured":false,"icon":null,"icon_path":null,"banner_path":null,"visual_settings":null,"visibility_settings":null,"default_values":null,"meta_title":null,"meta_description":null,"meta_keywords":null,"canonical_url":null,"og_title":null,"og_description":null,"og_image":null,"created_at":"2025-10-13T08:58:29.000000Z","updated_at":"2025-10-13T08:58:29.000000Z","pivot":{"product_id":10969,"category_id":58,"is_primary":1,"sort_order":3,"shop_id":null,"created_at":"2025-10-14T11:48:51.000000Z","updated_at":"2025-10-14T11:48:51.000000Z"}}]},"shops":{"1":{"Illuminate\\Support\\Collection":[{"id":42,"parent_id":null,"name":"Pojazdy","slug":"pojazdy","description":null,"short_description":null,"level":0,"path":null,"sort_order":0,"is_active":true,"is_featured":false,"icon":null,"icon_path":null,"banner_path":null,"visual_settings":null,"visibility_settings":null,"default_values":null,"meta_title":null,"meta_description":null,"meta_keywords":null,"canonical_url":null,"og_title":null,"og_description":null,"og_image":null,"created_at":"2025-10-10T12:00:52.000000Z","updated_at":"2025-10-10T12:00:52.000000Z","pivot":{"product_id":10969,"category_id":42,"is_primary":0,"sort_order":1,"shop_id":1,"created_at":"2025-10-14T11:48:51.000000Z","updated_at":"2025-10-14T11:48:51.000000Z"}},{"id":57,"parent_id":42,"name":"Quad","slug":"quad","description":null,"short_description":null,"level":1,"path":"/42","sort_order":0,"is_active":true,"is_featured":false,"icon":null,"icon_path":null,"banner_path":null,"visual_settings":null,"visibility_settings":null,"default_values":null,"meta_title":null,"meta_description":null,"meta_keywords":null,"canonical_url":null,"og_title":null,"og_description":null,"og_image":null,"created_at":"2025-10-13T08:58:29.000000Z","updated_at":"2025-10-13T08:58:29.000000Z","pivot":{"product_id":10969,"category_id":57,"is_primary":0,"sort_order":2,"shop_id":1,"created_at":"2025-10-14T11:48:51.000000Z","updated_at":"2025-10-14T11:48:51.000000Z"}},{"id":58,"parent_id":42,"name":"TEST PPM","slug":"test-ppm","description":null,"short_description":null,"level":1,"path":"/42","sort_order":8,"is_active":true,"is_featured":false,"icon":null,"icon_path":null,"banner_path":null,"visual_settings":null,"visibility_settings":null,"default_values":null,"meta_title":null,"meta_description":null,"meta_keywords":null,"canonical_url":null,"og_title":null,"og_description":null,"og_image":null,"created_at":"2025-10-13T08:58:29.000000Z","updated_at":"2025-10-13T08:58:29.000000Z","pivot":{"product_id":10969,"category_id":58,"is_primary":1,"sort_order":3,"shop_id":1,"created_at":"2025-10-14T11:48:51.000000Z","updated_at":"2025-10-14T11:48:51.000000Z"}}]}}}} 
[2025-10-15 06:38:36] production.DEBUG: loadShopCategories: Shop data loaded {"product_id":10969,"shop_id":1,"selected_ids":[42,57,58],"primary_id":58,"component_shopCategories_after":{"selected":[42,57,58],"primary":58}} 
[2025-10-15 06:38:36] production.INFO: Shop categories loaded (NEW ARCHITECTURE) {"product_id":10969,"shops_with_categories":[1],"architecture":"shop_id in product_categories pivot","final_shopCategories":{"1":{"selected":[42,57,58],"primary":58}}} 
[2025-10-15 06:38:36] production.INFO: Categories loaded for product {"product_id":10969,"default_categories_count":3,"primary_category":58,"shop_categories_loaded":1} 
[2025-10-15 06:38:36] production.DEBUG: loadProductData: Categories loaded {"product_id":10969,"defaultCategories_after":{"selected":[42,57,58],"primary":58},"shopCategories_after":{"1":{"selected":[42,57,58],"primary":58}}} 
[2025-10-15 06:38:36] production.INFO: Shop data loaded {"product_id":10969,"exported_shops":[1],"shops_count":1} 
[2025-10-15 06:38:36] production.INFO: Edit mode activated  
[2025-10-15 06:38:36] production.INFO: ProductForm mount() completed successfully {"isEditMode":true,"sku":"PPM-TEST","name":"TEST PPM"} 
[2025-10-15 06:38:36] production.INFO: ProductForm render() called {"isEditMode":true,"pageTitle":"Edytuj produkt: TEST PPM"} 
[2025-10-15 06:38:45] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/products?display=full&language=1&filter%5Bname%5D=%25%5Btest%5D%25&output_format=JSON","status_code":200,"execution_time_ms":53.95,"request_size_bytes":2,"response_size_bytes":1699,"timestamp":"2025-10-15T06:38:45+00:00"} 
[2025-10-15 06:38:45] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/products?display=full&language=1&filter%5Breference%5D=%5Btest%5D&output_format=JSON","status_code":200,"execution_time_ms":27.64,"request_size_bytes":2,"response_size_bytes":2,"timestamp":"2025-10-15T06:38:45+00:00"} 
[2025-10-15 06:38:45] production.DEBUG: Search responses {"search":"test","by_name_count":1,"by_reference_count":0} 
[2025-10-15 06:38:45] production.INFO: PrestaShop products loaded {"shop_id":5,"total":1,"filtered":1,"search":"test","from_cache":false} 
[2025-10-15 06:38:47] production.INFO: PENDING job progress created (pre-dispatch) {"progress_id":224,"job_id":"b2792ae4-0548-4d3f-bf77-7e7a813bd76f","job_type":"import","shop_id":5,"shop_name":"Test KAYO","total_count":1} 
[2025-10-15 06:38:47] production.DEBUG: JobProgressBar: Progress fetched {"job_id":224,"progress":{"status":"pending","message":"Oczekiwanie... Test KAYO","current":0,"total":1,"percentage":0.0,"errors":[],"shop_name":"Test KAYO","job_id":"b2792ae4-0548-4d3f-bf77-7e7a813bd76f","pending_conflicts":[]}} 
[2025-10-15 06:38:49] production.INFO: BulkImportProducts job started {"shop_id":5,"shop_name":"Test KAYO","mode":"individual","options":{"product_ids":[4017]},"pre_generated_job_id":"b2792ae4-0548-4d3f-bf77-7e7a813bd76f"} 
[2025-10-15 06:38:49] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/products/4017","status_code":200,"execution_time_ms":42.23,"request_size_bytes":2,"response_size_bytes":949,"timestamp":"2025-10-15T06:38:49+00:00"} 
[2025-10-15 06:38:49] production.INFO: BulkImportProducts: Products fetched {"shop_id":5,"shop_name":"Test KAYO","total_products":1,"mode":"individual"} 
[2025-10-15 06:38:49] production.DEBUG: Category analysis needed {"job_id":"b2792ae4-0548-4d3f-bf77-7e7a813bd76f","shop_id":5} 
[2025-10-15 06:38:49] production.INFO: Category analysis required - dispatching AnalyzeMissingCategories {"shop_id":5,"job_id":"b2792ae4-0548-4d3f-bf77-7e7a813bd76f","mode":"individual","total_products":1} 
[2025-10-15 06:38:49] production.INFO: JobProgress updated before category analysis {"progress_id":224,"job_id":"b2792ae4-0548-4d3f-bf77-7e7a813bd76f","total_count":1,"status":"pending"} 
[2025-10-15 06:38:49] production.INFO: AnalyzeMissingCategories dispatched - product import halted {"shop_id":5,"job_id":"b2792ae4-0548-4d3f-bf77-7e7a813bd76f","product_count":1} 
[2025-10-15 06:38:49] production.INFO: AnalyzeMissingCategories job started {"shop_id":5,"shop_name":"Test KAYO","product_count":1,"job_id":"b2792ae4-0548-4d3f-bf77-7e7a813bd76f"} 
[2025-10-15 06:38:49] production.DEBUG: Fetching products for category analysis {"product_ids_count":1,"filter":"[4017]"} 
[2025-10-15 06:38:49] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/products?display=full&filter%5Bid%5D=%5B4017%5D&output_format=JSON","status_code":200,"execution_time_ms":38.39,"request_size_bytes":2,"response_size_bytes":1699,"timestamp":"2025-10-15T06:38:49+00:00"} 
[2025-10-15 06:38:49] production.INFO: Category IDs extracted from products {"total_categories":3,"category_ids":[154,2,135]} 
[2025-10-15 06:38:49] production.INFO: Existing categories found in PPM {"existing_count":3,"existing_ids":[2,135,154]} 
[2025-10-15 06:38:49] production.INFO: Missing categories detected {"missing_count":0,"missing_ids":[]} 
[2025-10-15 06:38:49] production.INFO: No missing categories - creating empty preview for user approval {"shop_id":5,"job_id":"b2792ae4-0548-4d3f-bf77-7e7a813bd76f"} 
[2025-10-15 06:38:49] production.INFO: Empty preview created - waiting for user approval {"preview_id":156,"job_id":"b2792ae4-0548-4d3f-bf77-7e7a813bd76f","expires_at":"2025-10-15 07:38:49"} 
[2025-10-15 06:38:49] production.INFO: Broadcasting [CategoryPreviewReady] on channels [private-shop.5] with payload:
{
    "job_id": "b2792ae4-0548-4d3f-bf77-7e7a813bd76f",
    "shop_id": 5,
    "preview_id": 156,
    "timestamp": "2025-10-15T06:38:49+00:00",
    "socket": null
}  
[2025-10-15 06:38:50] production.INFO: ProductList: Pending CategoryPreview detected via polling {"preview_id":156,"job_id":"b2792ae4-0548-4d3f-bf77-7e7a813bd76f","shop_id":5,"total_categories":0} 
[2025-10-15 06:38:50] production.DEBUG: CategoryPreview marked as shown {"preview_id":156,"shown_count":1} 
[2025-10-15 06:38:50] production.INFO: üéØ CategoryPreviewModal::show() CALLED {"component_id":"DYvlgiBydJUKgTtxXmGi","preview_id":156,"is_open_before":false,"public_methods_count":95,"has_approve_method":true,"has_selectAll_method":true,"has_close_method":true,"all_public_methods":{"0":"show","1":"close","2":"toggleConflicts","3":"toggleCategory","4":"isCategorySelected","5":"selectAll","6":"deselectAll","7":"toggleSkipCategories","8":"approve","9":"approveSkipCategories","10":"showCreateCategoryForm","11":"hideCreateCategoryForm","12":"createQuickCategory","14":"openConflictResolution","15":"closeConflictResolution","16":"selectResolutionOption","17":"confirmConflictResolution","18":"resolveConflictOverwrite","19":"resolveConflictKeep","20":"resolveConflictManual","21":"resolveConflictCancel","22":"reject","23":"checkExistingCategories","24":"markExistingInTree","25":"extractNewCategoryIds","26":"extractAllCategoryIds","27":"loadCategoryMappingInfo","29":"detectCategoryConflicts","31":"extractAndMapCategories","32":"extractPrestaShopCategoryIds","33":"mapCategoryIdsToNames","34":"mapPrestaShopCategoryIdsToNames","35":"render","36":"id","37":"setId","39":"setName","41":"skipRender","42":"skipMount","43":"skipHydrate","48":"tap","49":"macro","50":"mixin","51":"hasMacro","52":"flushMacros","54":"macroCall","55":"authorize","56":"authorizeForUser","57":"parseAbilityAndArguments","58":"normalizeGuessedAbilityName","59":"authorizeResource","60":"resourceAbilityMap","61":"resourceMethodsWithoutModels","62":"hasProperty","64":"fill","65":"reset","66":"resetExcept","67":"pull","68":"only","69":"except","70":"all","72":"dispatch","73":"redirect","74":"redirectRoute","75":"redirectIntended","76":"redirectAction","77":"stream","79":"setPropertyAttribute","80":"mergeOutsideAttributes","81":"addRulesFromOutside","82":"addMessagesFromOutside","83":"addValidationAttributesFromOutside","85":"addError","86":"setErrorBag","87":"resetErrorBag","88":"clearValidation","89":"resetValidation","90":"errorBagExcept","95":"rulesForModel","96":"hasRuleFor","97":"ruleWithNumbersReplacedByStars","98":"missingRuleFor","99":"withValidator","100":"checkRuleMatchesProperty","101":"validate","102":"isRootComponent","103":"withFormObjectValidators","104":"validateOnly","105":"filterCollectionDataDownToSpecificKeys","107":"shortenModelAttributesInsideValidator","108":"providedOrGlobalRulesMessagesAndAttributes","110":"unwrapDataForValidation","111":"prepareForValidation","113":"js","115":"disableBackButtonCache","116":"enableBackButtonCache"}} 
[2025-10-15 06:38:50] production.INFO: CategoryPreviewModal: Checking existing categories {"shop_id":5,"existing_count":3,"existing_ids":[2,135,154]} 
[2025-10-15 06:38:50] production.INFO: üîç CategoryPreviewModal: detectCategoryConflicts() CALLED {"preview_id":156,"has_import_context":true,"import_context":{"mode":"individual","options":{"product_ids":[4017]}}} 
[2025-10-15 06:38:50] production.INFO: CategoryPreviewModal: Fetching products to check {"mode":"individual","options":{"product_ids":[4017]}} 
[2025-10-15 06:38:50] production.INFO: CategoryPreviewModal: Checking conflicts for products {"shop_id":5,"mode":"individual","product_count":1} 
[2025-10-15 06:38:50] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/products/4017","status_code":200,"execution_time_ms":36.5,"request_size_bytes":2,"response_size_bytes":949,"timestamp":"2025-10-15T06:38:50+00:00"} 
[2025-10-15 06:38:50] production.DEBUG: CategoryPreviewModal: Skipping PrestaShop root category {"prestashop_category_id":2} 
[2025-10-15 06:38:50] production.DEBUG: CategoryPreviewModal: Category not mapped (would be auto-imported) {"prestashop_category_id":135,"shop_id":5} 
[2025-10-15 06:38:50] production.DEBUG: CategoryPreviewModal: Category not mapped (would be auto-imported) {"prestashop_category_id":154,"shop_id":5} 
[2025-10-15 06:38:50] production.INFO: CategoryPreviewModal: Categories extracted and mapped {"prestashop_product_id":4017,"shop_id":5,"prestashop_category_count":3,"mapped_ppm_category_count":0,"ppm_category_ids":[]} 
[2025-10-15 06:38:50] production.INFO: üì¶ CategoryPreviewModal: Product categories after mapping {"prestashop_product_id":4017,"raw_ps_categories":[2,135,154],"mapped_ppm_categories":[]} 
[2025-10-15 06:38:50] production.INFO: ‚úÖ CategoryPreviewModal: Product found by SKU {"prestashop_product_id":4017,"sku":"PPM-TEST","ppm_product_id":10969,"existing_shop_id":1,"importing_to_shop_id":5,"scenario":"CROSS_SHOP_IMPORT"} 
[2025-10-15 06:38:50] production.DEBUG: CategoryPreviewModal: No categories mapped - will check default categories for conflicts {"prestashop_product_id":4017,"ppm_product_id":10969,"existing_shop_id":1} 
[2025-10-15 06:38:50] production.INFO: üîç CategoryPreviewModal: Comparing categories (using mapped PPM IDs) {"product_id":10969,"sku":"PPM-TEST","mapped_ppm_categories":[],"ppm_default_categories":[42,57,58],"ppm_shop_categories":[]} 
[2025-10-15 06:38:50] production.INFO: üîç CategoryPreviewModal: Category comparison results {"product_id":10969,"mapped_ppm_categories":[],"default_categories":[42,57,58],"shop_categories":[],"raw_ps_categories":[2,135,154],"has_default_conflict":true,"has_shop_conflict":false,"has_unmapped_categories":true,"has_conflict":true} 
[2025-10-15 06:38:50] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/2","status_code":200,"execution_time_ms":33.26,"request_size_bytes":2,"response_size_bytes":29246,"timestamp":"2025-10-15T06:38:50+00:00"} 
[2025-10-15 06:38:50] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":2,"name":"Kayo"} 
[2025-10-15 06:38:50] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/135","status_code":200,"execution_time_ms":29.14,"request_size_bytes":2,"response_size_bytes":324,"timestamp":"2025-10-15T06:38:50+00:00"} 
[2025-10-15 06:38:50] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":135,"name":"Buggy"} 
[2025-10-15 06:38:50] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/154","status_code":200,"execution_time_ms":27.1,"request_size_bytes":2,"response_size_bytes":276,"timestamp":"2025-10-15T06:38:50+00:00"} 
[2025-10-15 06:38:50] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":154,"name":"TEST-PPM"} 
[2025-10-15 06:38:50] production.INFO: CategoryPreviewModal: Mapped PrestaShop category IDs to names {"shop_id":5,"category_count":3,"names":["Kayo","Buggy","TEST-PPM"]} 
[2025-10-15 06:38:50] production.WARNING: üö® CategoryPreviewModal: CONFLICT DETECTED! {"product_id":10969,"sku":"PPM-TEST","name":"TEST PPM","import_will_assign":[],"current_default":[42,57,58],"current_shop":[],"raw_ps_categories":[2,135,154],"has_default_conflict":true,"has_shop_conflict":false,"has_unmapped_categories":true} 
[2025-10-15 06:38:50] production.INFO: CategoryPreviewModal: Conflict detection complete {"conflicts_found":1} 
[2025-10-15 06:38:50] production.INFO: CategoryPreviewModal: Opened successfully {"preview_id":156,"shop_name":"Test KAYO","total_categories":0,"selected_count":0,"conflicts_detected":1} 
[2025-10-15 06:38:51] production.DEBUG: CategoryPreviewModal: Conflicts section toggled {"show_conflicts":true,"conflicts_count":1} 
[2025-10-15 06:38:52] production.INFO: CategoryPreviewModal: Opened conflict resolution {"product_id":10969,"sku":"PPM-TEST","conflict_types":{"default":true,"shop":false}} 
[2025-10-15 06:38:53] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":156} 
[2025-10-15 06:38:54] production.DEBUG: CategoryPreviewModal: Resolution option selected {"option":"manual","product_id":10969} 
[2025-10-15 06:38:54] production.DEBUG: CategoryPicker: Mounted {"context":"conflict-resolution","shop_id":5,"initial_selected":0} 
[2025-10-15 06:38:54] production.DEBUG: CategoryPicker: Building tree node {"category_id":61,"name":"TEST-PPM","parent_id":60,"level":1,"has_children":false} 
[2025-10-15 06:38:54] production.DEBUG: CategoryPicker: Building tree node {"category_id":60,"name":"Buggy","parent_id":null,"level":0,"has_children":true} 
[2025-10-15 06:38:54] production.DEBUG: CategoryPicker: Building tree node {"category_id":59,"name":"Kayo","parent_id":null,"level":0,"has_children":false} 
[2025-10-15 06:38:55] production.DEBUG: CategoryPreviewModal: Resolution option selected {"option":"manual","product_id":10969} 
[2025-10-15 06:38:55] production.DEBUG: CategoryPicker: Building tree node {"category_id":61,"name":"TEST-PPM","parent_id":60,"level":1,"has_children":false} 
[2025-10-15 06:38:55] production.DEBUG: CategoryPicker: Building tree node {"category_id":60,"name":"Buggy","parent_id":null,"level":0,"has_children":true} 
[2025-10-15 06:38:55] production.DEBUG: CategoryPicker: Building tree node {"category_id":59,"name":"Kayo","parent_id":null,"level":0,"has_children":false} 
[2025-10-15 06:42:58] production.DEBUG: JobProgressBar: Progress fetched {"job_id":224,"progress":{"status":"pending","message":"Oczekiwanie... Test KAYO","current":0,"total":1,"percentage":0.0,"errors":[],"shop_name":"Test KAYO","job_id":"b2792ae4-0548-4d3f-bf77-7e7a813bd76f","pending_conflicts":[]}} 
[2025-10-15 06:43:02] production.INFO: ProductList: Pending CategoryPreview detected via polling {"preview_id":156,"job_id":"b2792ae4-0548-4d3f-bf77-7e7a813bd76f","shop_id":5,"total_categories":0} 
[2025-10-15 06:43:02] production.DEBUG: CategoryPreview marked as shown {"preview_id":156,"shown_count":1} 
[2025-10-15 06:43:02] production.INFO: üéØ CategoryPreviewModal::show() CALLED {"component_id":"msLh6h6em1AOYRsQjutW","preview_id":156,"is_open_before":false,"public_methods_count":95,"has_approve_method":true,"has_selectAll_method":true,"has_close_method":true,"all_public_methods":{"0":"show","1":"close","2":"toggleConflicts","3":"toggleCategory","4":"isCategorySelected","5":"selectAll","6":"deselectAll","7":"toggleSkipCategories","8":"approve","9":"approveSkipCategories","10":"showCreateCategoryForm","11":"hideCreateCategoryForm","12":"createQuickCategory","14":"openConflictResolution","15":"closeConflictResolution","16":"selectResolutionOption","17":"confirmConflictResolution","18":"resolveConflictOverwrite","19":"resolveConflictKeep","20":"resolveConflictManual","21":"resolveConflictCancel","22":"reject","23":"checkExistingCategories","24":"markExistingInTree","25":"extractNewCategoryIds","26":"extractAllCategoryIds","27":"loadCategoryMappingInfo","29":"detectCategoryConflicts","31":"extractAndMapCategories","32":"extractPrestaShopCategoryIds","33":"mapCategoryIdsToNames","34":"mapPrestaShopCategoryIdsToNames","35":"render","36":"id","37":"setId","39":"setName","41":"skipRender","42":"skipMount","43":"skipHydrate","48":"tap","49":"macro","50":"mixin","51":"hasMacro","52":"flushMacros","54":"macroCall","55":"authorize","56":"authorizeForUser","57":"parseAbilityAndArguments","58":"normalizeGuessedAbilityName","59":"authorizeResource","60":"resourceAbilityMap","61":"resourceMethodsWithoutModels","62":"hasProperty","64":"fill","65":"reset","66":"resetExcept","67":"pull","68":"only","69":"except","70":"all","72":"dispatch","73":"redirect","74":"redirectRoute","75":"redirectIntended","76":"redirectAction","77":"stream","79":"setPropertyAttribute","80":"mergeOutsideAttributes","81":"addRulesFromOutside","82":"addMessagesFromOutside","83":"addValidationAttributesFromOutside","85":"addError","86":"setErrorBag","87":"resetErrorBag","88":"clearValidation","89":"resetValidation","90":"errorBagExcept","95":"rulesForModel","96":"hasRuleFor","97":"ruleWithNumbersReplacedByStars","98":"missingRuleFor","99":"withValidator","100":"checkRuleMatchesProperty","101":"validate","102":"isRootComponent","103":"withFormObjectValidators","104":"validateOnly","105":"filterCollectionDataDownToSpecificKeys","107":"shortenModelAttributesInsideValidator","108":"providedOrGlobalRulesMessagesAndAttributes","110":"unwrapDataForValidation","111":"prepareForValidation","113":"js","115":"disableBackButtonCache","116":"enableBackButtonCache"}} 
[2025-10-15 06:43:02] production.INFO: CategoryPreviewModal: Checking existing categories {"shop_id":5,"existing_count":3,"existing_ids":[2,135,154]} 
[2025-10-15 06:43:02] production.INFO: üîç CategoryPreviewModal: detectCategoryConflicts() CALLED {"preview_id":156,"has_import_context":true,"import_context":{"mode":"individual","options":{"product_ids":[4017]}}} 
[2025-10-15 06:43:02] production.INFO: CategoryPreviewModal: Fetching products to check {"mode":"individual","options":{"product_ids":[4017]}} 
[2025-10-15 06:43:02] production.INFO: CategoryPreviewModal: Checking conflicts for products {"shop_id":5,"mode":"individual","product_count":1} 
[2025-10-15 06:43:02] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/products/4017","status_code":200,"execution_time_ms":55.02,"request_size_bytes":2,"response_size_bytes":949,"timestamp":"2025-10-15T06:43:02+00:00"} 
[2025-10-15 06:43:02] production.DEBUG: CategoryPreviewModal: Skipping PrestaShop root category {"prestashop_category_id":2} 
[2025-10-15 06:43:02] production.DEBUG: CategoryPreviewModal: Category not mapped (would be auto-imported) {"prestashop_category_id":135,"shop_id":5} 
[2025-10-15 06:43:02] production.DEBUG: CategoryPreviewModal: Category not mapped (would be auto-imported) {"prestashop_category_id":154,"shop_id":5} 
[2025-10-15 06:43:02] production.INFO: CategoryPreviewModal: Categories extracted and mapped {"prestashop_product_id":4017,"shop_id":5,"prestashop_category_count":3,"mapped_ppm_category_count":0,"ppm_category_ids":[]} 
[2025-10-15 06:43:02] production.INFO: üì¶ CategoryPreviewModal: Product categories after mapping {"prestashop_product_id":4017,"raw_ps_categories":[2,135,154],"mapped_ppm_categories":[]} 
[2025-10-15 06:43:02] production.INFO: ‚úÖ CategoryPreviewModal: Product found by SKU {"prestashop_product_id":4017,"sku":"PPM-TEST","ppm_product_id":10969,"existing_shop_id":1,"importing_to_shop_id":5,"scenario":"CROSS_SHOP_IMPORT"} 
[2025-10-15 06:43:02] production.DEBUG: CategoryPreviewModal: No categories mapped - will check default categories for conflicts {"prestashop_product_id":4017,"ppm_product_id":10969,"existing_shop_id":1} 
[2025-10-15 06:43:02] production.INFO: üîç CategoryPreviewModal: Comparing categories (using mapped PPM IDs) {"product_id":10969,"sku":"PPM-TEST","mapped_ppm_categories":[],"ppm_default_categories":[42,57,58],"ppm_shop_categories":[]} 
[2025-10-15 06:43:02] production.INFO: üîç CategoryPreviewModal: Category comparison results {"product_id":10969,"mapped_ppm_categories":[],"default_categories":[42,57,58],"shop_categories":[],"raw_ps_categories":[2,135,154],"has_default_conflict":true,"has_shop_conflict":false,"has_unmapped_categories":true,"has_conflict":true} 
[2025-10-15 06:43:02] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/2","status_code":200,"execution_time_ms":31.19,"request_size_bytes":2,"response_size_bytes":29246,"timestamp":"2025-10-15T06:43:02+00:00"} 
[2025-10-15 06:43:02] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":2,"name":"Kayo"} 
[2025-10-15 06:43:02] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/135","status_code":200,"execution_time_ms":27.34,"request_size_bytes":2,"response_size_bytes":324,"timestamp":"2025-10-15T06:43:02+00:00"} 
[2025-10-15 06:43:02] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":135,"name":"Buggy"} 
[2025-10-15 06:43:02] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/154","status_code":200,"execution_time_ms":26.01,"request_size_bytes":2,"response_size_bytes":276,"timestamp":"2025-10-15T06:43:02+00:00"} 
[2025-10-15 06:43:02] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":154,"name":"TEST-PPM"} 
[2025-10-15 06:43:02] production.INFO: CategoryPreviewModal: Mapped PrestaShop category IDs to names {"shop_id":5,"category_count":3,"names":["Kayo","Buggy","TEST-PPM"]} 
[2025-10-15 06:43:02] production.WARNING: üö® CategoryPreviewModal: CONFLICT DETECTED! {"product_id":10969,"sku":"PPM-TEST","name":"TEST PPM","import_will_assign":[],"current_default":[42,57,58],"current_shop":[],"raw_ps_categories":[2,135,154],"has_default_conflict":true,"has_shop_conflict":false,"has_unmapped_categories":true} 
[2025-10-15 06:43:02] production.INFO: CategoryPreviewModal: Conflict detection complete {"conflicts_found":1} 
[2025-10-15 06:43:02] production.INFO: CategoryPreviewModal: Opened successfully {"preview_id":156,"shop_name":"Test KAYO","total_categories":0,"selected_count":0,"conflicts_detected":1} 
[2025-10-15 06:43:04] production.INFO: CategoryPreviewModal: JobProgress marked as failed (user rejected) {"job_progress_id":224,"job_id":"b2792ae4-0548-4d3f-bf77-7e7a813bd76f"} 
[2025-10-15 06:43:04] production.INFO: CategoryPreviewModal: Preview rejected {"preview_id":156,"shop_id":5} 
[2025-10-15 06:43:04] production.INFO: CategoryPreviewModal: Closed  
[2025-10-15 06:47:11] production.INFO: ProductForm mount() called {"product_id":10969} 
[2025-10-15 06:47:11] production.INFO: CategoryManager initialized successfully {"categoryManager_exists":true,"categoryManager_type":"App\\Http\\Livewire\\Products\\Management\\Services\\ProductCategoryManager","product_id":10969} 
[2025-10-15 06:47:11] production.DEBUG: loadProductData: About to load categories {"product_id":10969,"categoryManager_exists":true,"shopCategories_before":[]} 
[2025-10-15 06:47:11] production.DEBUG: loadShopCategories: Raw data from allCategoriesGroupedByShop() {"product_id":10969,"default_count":3,"shops_keys":[1],"full_data":{"default":{"Illuminate\\Support\\Collection":[{"id":42,"parent_id":null,"name":"Pojazdy","slug":"pojazdy","description":null,"short_description":null,"level":0,"path":null,"sort_order":0,"is_active":true,"is_featured":false,"icon":null,"icon_path":null,"banner_path":null,"visual_settings":null,"visibility_settings":null,"default_values":null,"meta_title":null,"meta_description":null,"meta_keywords":null,"canonical_url":null,"og_title":null,"og_description":null,"og_image":null,"created_at":"2025-10-10T12:00:52.000000Z","updated_at":"2025-10-10T12:00:52.000000Z","pivot":{"product_id":10969,"category_id":42,"is_primary":0,"sort_order":1,"shop_id":null,"created_at":"2025-10-14T11:48:51.000000Z","updated_at":"2025-10-14T11:48:51.000000Z"}},{"id":57,"parent_id":42,"name":"Quad","slug":"quad","description":null,"short_description":null,"level":1,"path":"/42","sort_order":0,"is_active":true,"is_featured":false,"icon":null,"icon_path":null,"banner_path":null,"visual_settings":null,"visibility_settings":null,"default_values":null,"meta_title":null,"meta_description":null,"meta_keywords":null,"canonical_url":null,"og_title":null,"og_description":null,"og_image":null,"created_at":"2025-10-13T08:58:29.000000Z","updated_at":"2025-10-13T08:58:29.000000Z","pivot":{"product_id":10969,"category_id":57,"is_primary":0,"sort_order":2,"shop_id":null,"created_at":"2025-10-14T11:48:51.000000Z","updated_at":"2025-10-14T11:48:51.000000Z"}},{"id":58,"parent_id":42,"name":"TEST PPM","slug":"test-ppm","description":null,"short_description":null,"level":1,"path":"/42","sort_order":8,"is_active":true,"is_featured":false,"icon":null,"icon_path":null,"banner_path":null,"visual_settings":null,"visibility_settings":null,"default_values":null,"meta_title":null,"meta_description":null,"meta_keywords":null,"canonical_url":null,"og_title":null,"og_description":null,"og_image":null,"created_at":"2025-10-13T08:58:29.000000Z","updated_at":"2025-10-13T08:58:29.000000Z","pivot":{"product_id":10969,"category_id":58,"is_primary":1,"sort_order":3,"shop_id":null,"created_at":"2025-10-14T11:48:51.000000Z","updated_at":"2025-10-14T11:48:51.000000Z"}}]},"shops":{"1":{"Illuminate\\Support\\Collection":[{"id":42,"parent_id":null,"name":"Pojazdy","slug":"pojazdy","description":null,"short_description":null,"level":0,"path":null,"sort_order":0,"is_active":true,"is_featured":false,"icon":null,"icon_path":null,"banner_path":null,"visual_settings":null,"visibility_settings":null,"default_values":null,"meta_title":null,"meta_description":null,"meta_keywords":null,"canonical_url":null,"og_title":null,"og_description":null,"og_image":null,"created_at":"2025-10-10T12:00:52.000000Z","updated_at":"2025-10-10T12:00:52.000000Z","pivot":{"product_id":10969,"category_id":42,"is_primary":0,"sort_order":1,"shop_id":1,"created_at":"2025-10-14T11:48:51.000000Z","updated_at":"2025-10-14T11:48:51.000000Z"}},{"id":57,"parent_id":42,"name":"Quad","slug":"quad","description":null,"short_description":null,"level":1,"path":"/42","sort_order":0,"is_active":true,"is_featured":false,"icon":null,"icon_path":null,"banner_path":null,"visual_settings":null,"visibility_settings":null,"default_values":null,"meta_title":null,"meta_description":null,"meta_keywords":null,"canonical_url":null,"og_title":null,"og_description":null,"og_image":null,"created_at":"2025-10-13T08:58:29.000000Z","updated_at":"2025-10-13T08:58:29.000000Z","pivot":{"product_id":10969,"category_id":57,"is_primary":0,"sort_order":2,"shop_id":1,"created_at":"2025-10-14T11:48:51.000000Z","updated_at":"2025-10-14T11:48:51.000000Z"}},{"id":58,"parent_id":42,"name":"TEST PPM","slug":"test-ppm","description":null,"short_description":null,"level":1,"path":"/42","sort_order":8,"is_active":true,"is_featured":false,"icon":null,"icon_path":null,"banner_path":null,"visual_settings":null,"visibility_settings":null,"default_values":null,"meta_title":null,"meta_description":null,"meta_keywords":null,"canonical_url":null,"og_title":null,"og_description":null,"og_image":null,"created_at":"2025-10-13T08:58:29.000000Z","updated_at":"2025-10-13T08:58:29.000000Z","pivot":{"product_id":10969,"category_id":58,"is_primary":1,"sort_order":3,"shop_id":1,"created_at":"2025-10-14T11:48:51.000000Z","updated_at":"2025-10-14T11:48:51.000000Z"}}]}}}} 
[2025-10-15 06:47:11] production.DEBUG: loadShopCategories: Shop data loaded {"product_id":10969,"shop_id":1,"selected_ids":[42,57,58],"primary_id":58,"component_shopCategories_after":{"selected":[42,57,58],"primary":58}} 
[2025-10-15 06:47:11] production.INFO: Shop categories loaded (NEW ARCHITECTURE) {"product_id":10969,"shops_with_categories":[1],"architecture":"shop_id in product_categories pivot","final_shopCategories":{"1":{"selected":[42,57,58],"primary":58}}} 
[2025-10-15 06:47:11] production.INFO: Categories loaded for product {"product_id":10969,"default_categories_count":3,"primary_category":58,"shop_categories_loaded":1} 
[2025-10-15 06:47:11] production.DEBUG: loadProductData: Categories loaded {"product_id":10969,"defaultCategories_after":{"selected":[42,57,58],"primary":58},"shopCategories_after":{"1":{"selected":[42,57,58],"primary":58}}} 
[2025-10-15 06:47:11] production.INFO: Shop data loaded {"product_id":10969,"exported_shops":[1],"shops_count":1} 
[2025-10-15 06:47:11] production.INFO: Edit mode activated  
[2025-10-15 06:47:11] production.INFO: ProductForm mount() completed successfully {"isEditMode":true,"sku":"PPM-TEST","name":"TEST PPM"} 
[2025-10-15 06:47:11] production.INFO: ProductForm render() called {"isEditMode":true,"pageTitle":"Edytuj produkt: TEST PPM"} 
[2025-10-15 06:47:20] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/products?display=full&language=1&filter%5Bname%5D=%25%5Btest%5D%25&output_format=JSON","status_code":200,"execution_time_ms":54.86,"request_size_bytes":2,"response_size_bytes":1699,"timestamp":"2025-10-15T06:47:20+00:00"} 
[2025-10-15 06:47:20] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/products?display=full&language=1&filter%5Breference%5D=%5Btest%5D&output_format=JSON","status_code":200,"execution_time_ms":29.62,"request_size_bytes":2,"response_size_bytes":2,"timestamp":"2025-10-15T06:47:20+00:00"} 
[2025-10-15 06:47:20] production.DEBUG: Search responses {"search":"test","by_name_count":1,"by_reference_count":0} 
[2025-10-15 06:47:20] production.INFO: PrestaShop products loaded {"shop_id":5,"total":1,"filtered":1,"search":"test","from_cache":false} 
[2025-10-15 06:47:21] production.INFO: PENDING job progress created (pre-dispatch) {"progress_id":225,"job_id":"6fdb560c-98e1-4955-b656-feec444ab5fe","job_type":"import","shop_id":5,"shop_name":"Test KAYO","total_count":1} 
[2025-10-15 06:47:21] production.DEBUG: JobProgressBar: Progress fetched {"job_id":225,"progress":{"status":"pending","message":"Oczekiwanie... Test KAYO","current":0,"total":1,"percentage":0.0,"errors":[],"shop_name":"Test KAYO","job_id":"6fdb560c-98e1-4955-b656-feec444ab5fe","pending_conflicts":[]}} 
[2025-10-15 06:47:22] production.INFO: BulkImportProducts job started {"shop_id":5,"shop_name":"Test KAYO","mode":"individual","options":{"product_ids":[4017]},"pre_generated_job_id":"6fdb560c-98e1-4955-b656-feec444ab5fe"} 
[2025-10-15 06:47:22] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/products/4017","status_code":200,"execution_time_ms":38.15,"request_size_bytes":2,"response_size_bytes":949,"timestamp":"2025-10-15T06:47:22+00:00"} 
[2025-10-15 06:47:22] production.INFO: BulkImportProducts: Products fetched {"shop_id":5,"shop_name":"Test KAYO","total_products":1,"mode":"individual"} 
[2025-10-15 06:47:22] production.DEBUG: Category analysis needed {"job_id":"6fdb560c-98e1-4955-b656-feec444ab5fe","shop_id":5} 
[2025-10-15 06:47:22] production.INFO: Category analysis required - dispatching AnalyzeMissingCategories {"shop_id":5,"job_id":"6fdb560c-98e1-4955-b656-feec444ab5fe","mode":"individual","total_products":1} 
[2025-10-15 06:47:22] production.INFO: JobProgress updated before category analysis {"progress_id":225,"job_id":"6fdb560c-98e1-4955-b656-feec444ab5fe","total_count":1,"status":"pending"} 
[2025-10-15 06:47:22] production.INFO: AnalyzeMissingCategories dispatched - product import halted {"shop_id":5,"job_id":"6fdb560c-98e1-4955-b656-feec444ab5fe","product_count":1} 
[2025-10-15 06:47:22] production.INFO: AnalyzeMissingCategories job started {"shop_id":5,"shop_name":"Test KAYO","product_count":1,"job_id":"6fdb560c-98e1-4955-b656-feec444ab5fe"} 
[2025-10-15 06:47:22] production.DEBUG: Fetching products for category analysis {"product_ids_count":1,"filter":"[4017]"} 
[2025-10-15 06:47:22] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/products?display=full&filter%5Bid%5D=%5B4017%5D&output_format=JSON","status_code":200,"execution_time_ms":36.59,"request_size_bytes":2,"response_size_bytes":1699,"timestamp":"2025-10-15T06:47:22+00:00"} 
[2025-10-15 06:47:22] production.INFO: Category IDs extracted from products {"total_categories":3,"category_ids":[154,2,135]} 
[2025-10-15 06:47:22] production.INFO: Existing categories found in PPM {"existing_count":3,"existing_ids":[2,135,154]} 
[2025-10-15 06:47:22] production.INFO: Missing categories detected {"missing_count":0,"missing_ids":[]} 
[2025-10-15 06:47:22] production.INFO: No missing categories - creating empty preview for user approval {"shop_id":5,"job_id":"6fdb560c-98e1-4955-b656-feec444ab5fe"} 
[2025-10-15 06:47:22] production.INFO: Empty preview created - waiting for user approval {"preview_id":157,"job_id":"6fdb560c-98e1-4955-b656-feec444ab5fe","expires_at":"2025-10-15 07:47:22"} 
[2025-10-15 06:47:22] production.INFO: ProductList: Pending CategoryPreview detected via polling {"preview_id":157,"job_id":"6fdb560c-98e1-4955-b656-feec444ab5fe","shop_id":5,"total_categories":0} 
[2025-10-15 06:47:22] production.DEBUG: CategoryPreview marked as shown {"preview_id":157,"shown_count":1} 
[2025-10-15 06:47:22] production.INFO: Broadcasting [CategoryPreviewReady] on channels [private-shop.5] with payload:
{
    "job_id": "6fdb560c-98e1-4955-b656-feec444ab5fe",
    "shop_id": 5,
    "preview_id": 157,
    "timestamp": "2025-10-15T06:47:22+00:00",
    "socket": null
}  
[2025-10-15 06:47:22] production.INFO: üéØ CategoryPreviewModal::show() CALLED {"component_id":"rd5tJqexgFPZoSokJHX6","preview_id":157,"is_open_before":false,"public_methods_count":95,"has_approve_method":true,"has_selectAll_method":true,"has_close_method":true,"all_public_methods":{"0":"show","1":"close","2":"toggleConflicts","3":"toggleCategory","4":"isCategorySelected","5":"selectAll","6":"deselectAll","7":"toggleSkipCategories","8":"approve","9":"approveSkipCategories","10":"showCreateCategoryForm","11":"hideCreateCategoryForm","12":"createQuickCategory","14":"openConflictResolution","15":"closeConflictResolution","16":"selectResolutionOption","17":"confirmConflictResolution","18":"resolveConflictOverwrite","19":"resolveConflictKeep","20":"resolveConflictManual","21":"resolveConflictCancel","22":"reject","23":"checkExistingCategories","24":"markExistingInTree","25":"extractNewCategoryIds","26":"extractAllCategoryIds","27":"loadCategoryMappingInfo","29":"detectCategoryConflicts","31":"extractAndMapCategories","32":"extractPrestaShopCategoryIds","33":"mapCategoryIdsToNames","34":"mapPrestaShopCategoryIdsToNames","35":"render","36":"id","37":"setId","39":"setName","41":"skipRender","42":"skipMount","43":"skipHydrate","48":"tap","49":"macro","50":"mixin","51":"hasMacro","52":"flushMacros","54":"macroCall","55":"authorize","56":"authorizeForUser","57":"parseAbilityAndArguments","58":"normalizeGuessedAbilityName","59":"authorizeResource","60":"resourceAbilityMap","61":"resourceMethodsWithoutModels","62":"hasProperty","64":"fill","65":"reset","66":"resetExcept","67":"pull","68":"only","69":"except","70":"all","72":"dispatch","73":"redirect","74":"redirectRoute","75":"redirectIntended","76":"redirectAction","77":"stream","79":"setPropertyAttribute","80":"mergeOutsideAttributes","81":"addRulesFromOutside","82":"addMessagesFromOutside","83":"addValidationAttributesFromOutside","85":"addError","86":"setErrorBag","87":"resetErrorBag","88":"clearValidation","89":"resetValidation","90":"errorBagExcept","95":"rulesForModel","96":"hasRuleFor","97":"ruleWithNumbersReplacedByStars","98":"missingRuleFor","99":"withValidator","100":"checkRuleMatchesProperty","101":"validate","102":"isRootComponent","103":"withFormObjectValidators","104":"validateOnly","105":"filterCollectionDataDownToSpecificKeys","107":"shortenModelAttributesInsideValidator","108":"providedOrGlobalRulesMessagesAndAttributes","110":"unwrapDataForValidation","111":"prepareForValidation","113":"js","115":"disableBackButtonCache","116":"enableBackButtonCache"}} 
[2025-10-15 06:47:22] production.INFO: CategoryPreviewModal: Checking existing categories {"shop_id":5,"existing_count":3,"existing_ids":[2,135,154]} 
[2025-10-15 06:47:22] production.INFO: üîç CategoryPreviewModal: detectCategoryConflicts() CALLED {"preview_id":157,"has_import_context":true,"import_context":{"mode":"individual","options":{"product_ids":[4017]}}} 
[2025-10-15 06:47:22] production.INFO: CategoryPreviewModal: Fetching products to check {"mode":"individual","options":{"product_ids":[4017]}} 
[2025-10-15 06:47:22] production.INFO: CategoryPreviewModal: Checking conflicts for products {"shop_id":5,"mode":"individual","product_count":1} 
[2025-10-15 06:47:22] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/products/4017","status_code":200,"execution_time_ms":35.3,"request_size_bytes":2,"response_size_bytes":949,"timestamp":"2025-10-15T06:47:22+00:00"} 
[2025-10-15 06:47:22] production.DEBUG: CategoryPreviewModal: Skipping PrestaShop root category {"prestashop_category_id":2} 
[2025-10-15 06:47:22] production.DEBUG: CategoryPreviewModal: Category not mapped (would be auto-imported) {"prestashop_category_id":135,"shop_id":5} 
[2025-10-15 06:47:22] production.DEBUG: CategoryPreviewModal: Category not mapped (would be auto-imported) {"prestashop_category_id":154,"shop_id":5} 
[2025-10-15 06:47:22] production.INFO: CategoryPreviewModal: Categories extracted and mapped {"prestashop_product_id":4017,"shop_id":5,"prestashop_category_count":3,"mapped_ppm_category_count":0,"ppm_category_ids":[]} 
[2025-10-15 06:47:22] production.INFO: üì¶ CategoryPreviewModal: Product categories after mapping {"prestashop_product_id":4017,"raw_ps_categories":[2,135,154],"mapped_ppm_categories":[]} 
[2025-10-15 06:47:22] production.INFO: ‚úÖ CategoryPreviewModal: Product found by SKU {"prestashop_product_id":4017,"sku":"PPM-TEST","ppm_product_id":10969,"existing_shop_id":1,"importing_to_shop_id":5,"scenario":"CROSS_SHOP_IMPORT"} 
[2025-10-15 06:47:22] production.DEBUG: CategoryPreviewModal: No categories mapped - will check default categories for conflicts {"prestashop_product_id":4017,"ppm_product_id":10969,"existing_shop_id":1} 
[2025-10-15 06:47:22] production.INFO: üîç CategoryPreviewModal: Comparing categories (using mapped PPM IDs) {"product_id":10969,"sku":"PPM-TEST","mapped_ppm_categories":[],"ppm_default_categories":[42,57,58],"ppm_shop_categories":[]} 
[2025-10-15 06:47:22] production.INFO: üîç CategoryPreviewModal: Category comparison results {"product_id":10969,"mapped_ppm_categories":[],"default_categories":[42,57,58],"shop_categories":[],"raw_ps_categories":[2,135,154],"has_default_conflict":true,"has_shop_conflict":false,"has_unmapped_categories":true,"has_conflict":true} 
[2025-10-15 06:47:22] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/2","status_code":200,"execution_time_ms":31.8,"request_size_bytes":2,"response_size_bytes":29246,"timestamp":"2025-10-15T06:47:22+00:00"} 
[2025-10-15 06:47:22] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":2,"name":"Kayo"} 
[2025-10-15 06:47:22] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/135","status_code":200,"execution_time_ms":26.84,"request_size_bytes":2,"response_size_bytes":324,"timestamp":"2025-10-15T06:47:22+00:00"} 
[2025-10-15 06:47:22] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":135,"name":"Buggy"} 
[2025-10-15 06:47:22] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/154","status_code":200,"execution_time_ms":25.92,"request_size_bytes":2,"response_size_bytes":276,"timestamp":"2025-10-15T06:47:22+00:00"} 
[2025-10-15 06:47:22] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":154,"name":"TEST-PPM"} 
[2025-10-15 06:47:22] production.INFO: CategoryPreviewModal: Mapped PrestaShop category IDs to names {"shop_id":5,"category_count":3,"names":["Kayo","Buggy","TEST-PPM"]} 
[2025-10-15 06:47:22] production.WARNING: üö® CategoryPreviewModal: CONFLICT DETECTED! {"product_id":10969,"sku":"PPM-TEST","name":"TEST PPM","import_will_assign":[],"current_default":[42,57,58],"current_shop":[],"raw_ps_categories":[2,135,154],"has_default_conflict":true,"has_shop_conflict":false,"has_unmapped_categories":true} 
[2025-10-15 06:47:22] production.INFO: CategoryPreviewModal: Conflict detection complete {"conflicts_found":1} 
[2025-10-15 06:47:22] production.INFO: CategoryPreviewModal: Opened successfully {"preview_id":157,"shop_name":"Test KAYO","total_categories":0,"selected_count":0,"conflicts_detected":1} 
[2025-10-15 06:47:23] production.DEBUG: CategoryPreviewModal: Conflicts section toggled {"show_conflicts":true,"conflicts_count":1} 
[2025-10-15 06:47:24] production.INFO: üîì CategoryPreviewModal: CONFLICT MODAL OPENED {"livewire_id":"rd5tJqexgFPZoSokJHX6","product_id":10969,"sku":"PPM-TEST","modal_instance_id":"modal_68ef437cbd4770.96801978","conflict_types":{"default":true,"shop":false},"showConflictResolutionModal":true,"timestamp":"2025-10-15 06:47:24.775318"} 
[2025-10-15 06:47:25] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:47:27] production.INFO: üéØ CategoryPreviewModal: RESOLUTION OPTION SELECTED {"livewire_id":"rd5tJqexgFPZoSokJHX6","option":"manual","before_state":null,"after_state":"manual","product_id":10969,"product_sku":"PPM-TEST","modal_instance_id":"modal_68ef437cbd4770.96801978","showConflictResolutionModal":true,"will_show_category_picker":true,"timestamp":"2025-10-15 06:47:27.260802"} 
[2025-10-15 06:47:27] production.WARNING: ‚ö†Ô∏è CategoryPreviewModal: MANUAL SELECTED - CategoryPicker will mount! {"livewire_id":"rd5tJqexgFPZoSokJHX6","modal_instance_id":"modal_68ef437cbd4770.96801978","manuallySelectedCategories":[],"timestamp":"2025-10-15 06:47:27.262268"} 
[2025-10-15 06:47:27] production.INFO: üü¢ CategoryPicker: MOUNTED {"livewire_id":"iOb8KjVp6xW0IUzK4dFv","context":"conflict-resolution","shop_id":5,"initial_selected":[],"initial_selected_count":0,"timestamp":"2025-10-15 06:47:27.263261"} 
[2025-10-15 06:47:27] production.DEBUG: CategoryPicker: Building tree node {"category_id":61,"name":"TEST-PPM","parent_id":60,"level":1,"has_children":false} 
[2025-10-15 06:47:27] production.DEBUG: CategoryPicker: Building tree node {"category_id":60,"name":"Buggy","parent_id":null,"level":0,"has_children":true} 
[2025-10-15 06:47:27] production.DEBUG: CategoryPicker: Building tree node {"category_id":59,"name":"Kayo","parent_id":null,"level":0,"has_children":false} 
[2025-10-15 06:47:27] production.DEBUG: üé® CategoryPicker: RENDER {"livewire_id":"iOb8KjVp6xW0IUzK4dFv","context":"conflict-resolution","selected_categories":[],"selected_count":0,"visible_count":3,"tree_nodes":2,"search":"","show_only_selected":false,"timestamp":"2025-10-15 06:47:27.265224"} 
[2025-10-15 06:47:27] production.DEBUG: üîµ CategoryPicker: DEHYDRATE (before response) {"livewire_id":"iOb8KjVp6xW0IUzK4dFv","context":"conflict-resolution","selected_categories":[],"selected_count":0,"search":"","show_only_selected":false,"timestamp":"2025-10-15 06:47:27.267967"} 
[2025-10-15 06:47:28] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:47:28] production.DEBUG: üü° CategoryPicker: HYDRATE (after request) {"livewire_id":"iOb8KjVp6xW0IUzK4dFv","context":"conflict-resolution","selected_categories":[],"selected_count":0,"timestamp":"2025-10-15 06:47:28.500952"} 
[2025-10-15 06:47:28] production.DEBUG: CategoryPicker: Building tree node {"category_id":61,"name":"TEST-PPM","parent_id":60,"level":1,"has_children":false} 
[2025-10-15 06:47:28] production.DEBUG: CategoryPicker: Building tree node {"category_id":60,"name":"Buggy","parent_id":null,"level":0,"has_children":true} 
[2025-10-15 06:47:28] production.DEBUG: CategoryPicker: Building tree node {"category_id":59,"name":"Kayo","parent_id":null,"level":0,"has_children":false} 
[2025-10-15 06:47:28] production.DEBUG: üé® CategoryPicker: RENDER {"livewire_id":"iOb8KjVp6xW0IUzK4dFv","context":"conflict-resolution","selected_categories":[],"selected_count":0,"visible_count":3,"tree_nodes":2,"search":"","show_only_selected":false,"timestamp":"2025-10-15 06:47:28.502033"} 
[2025-10-15 06:47:28] production.DEBUG: üîµ CategoryPicker: DEHYDRATE (before response) {"livewire_id":"iOb8KjVp6xW0IUzK4dFv","context":"conflict-resolution","selected_categories":[],"selected_count":0,"search":"","show_only_selected":false,"timestamp":"2025-10-15 06:47:28.502883"} 
[2025-10-15 06:47:28] production.INFO: üéØ CategoryPreviewModal: RESOLUTION OPTION SELECTED {"livewire_id":"rd5tJqexgFPZoSokJHX6","option":"manual","before_state":"manual","after_state":"manual","product_id":10969,"product_sku":"PPM-TEST","modal_instance_id":"modal_68ef437cbd4770.96801978","showConflictResolutionModal":true,"will_show_category_picker":true,"timestamp":"2025-10-15 06:47:28.588567"} 
[2025-10-15 06:47:28] production.WARNING: ‚ö†Ô∏è CategoryPreviewModal: MANUAL SELECTED - CategoryPicker will mount! {"livewire_id":"rd5tJqexgFPZoSokJHX6","modal_instance_id":"modal_68ef437cbd4770.96801978","manuallySelectedCategories":[],"timestamp":"2025-10-15 06:47:28.589892"} 
[2025-10-15 06:47:28] production.DEBUG: üü° CategoryPicker: HYDRATE (after request) {"livewire_id":"iOb8KjVp6xW0IUzK4dFv","context":"conflict-resolution","selected_categories":[],"selected_count":0,"timestamp":"2025-10-15 06:47:28.591172"} 
[2025-10-15 06:47:28] production.DEBUG: CategoryPicker: Building tree node {"category_id":61,"name":"TEST-PPM","parent_id":60,"level":1,"has_children":false} 
[2025-10-15 06:47:28] production.DEBUG: CategoryPicker: Building tree node {"category_id":60,"name":"Buggy","parent_id":null,"level":0,"has_children":true} 
[2025-10-15 06:47:28] production.DEBUG: CategoryPicker: Building tree node {"category_id":59,"name":"Kayo","parent_id":null,"level":0,"has_children":false} 
[2025-10-15 06:47:28] production.DEBUG: üé® CategoryPicker: RENDER {"livewire_id":"iOb8KjVp6xW0IUzK4dFv","context":"conflict-resolution","selected_categories":[],"selected_count":0,"visible_count":3,"tree_nodes":2,"search":"","show_only_selected":false,"timestamp":"2025-10-15 06:47:28.592972"} 
[2025-10-15 06:47:28] production.DEBUG: üîµ CategoryPicker: DEHYDRATE (before response) {"livewire_id":"iOb8KjVp6xW0IUzK4dFv","context":"conflict-resolution","selected_categories":[],"selected_count":0,"search":"","show_only_selected":false,"timestamp":"2025-10-15 06:47:28.593762"} 
[2025-10-15 06:47:38] production.DEBUG: JobProgressBar: Progress fetched {"job_id":225,"progress":{"status":"pending","message":"Oczekiwanie... Test KAYO","current":0,"total":1,"percentage":0.0,"errors":[],"shop_name":"Test KAYO","job_id":"6fdb560c-98e1-4955-b656-feec444ab5fe","pending_conflicts":[]}} 
[2025-10-15 06:47:41] production.INFO: ProductList: Pending CategoryPreview detected via polling {"preview_id":157,"job_id":"6fdb560c-98e1-4955-b656-feec444ab5fe","shop_id":5,"total_categories":0} 
[2025-10-15 06:47:41] production.DEBUG: CategoryPreview marked as shown {"preview_id":157,"shown_count":1} 
[2025-10-15 06:47:41] production.INFO: üéØ CategoryPreviewModal::show() CALLED {"component_id":"FhZXUEJh3VhJxEi7BoJd","preview_id":157,"is_open_before":false,"public_methods_count":95,"has_approve_method":true,"has_selectAll_method":true,"has_close_method":true,"all_public_methods":{"0":"show","1":"close","2":"toggleConflicts","3":"toggleCategory","4":"isCategorySelected","5":"selectAll","6":"deselectAll","7":"toggleSkipCategories","8":"approve","9":"approveSkipCategories","10":"showCreateCategoryForm","11":"hideCreateCategoryForm","12":"createQuickCategory","14":"openConflictResolution","15":"closeConflictResolution","16":"selectResolutionOption","17":"confirmConflictResolution","18":"resolveConflictOverwrite","19":"resolveConflictKeep","20":"resolveConflictManual","21":"resolveConflictCancel","22":"reject","23":"checkExistingCategories","24":"markExistingInTree","25":"extractNewCategoryIds","26":"extractAllCategoryIds","27":"loadCategoryMappingInfo","29":"detectCategoryConflicts","31":"extractAndMapCategories","32":"extractPrestaShopCategoryIds","33":"mapCategoryIdsToNames","34":"mapPrestaShopCategoryIdsToNames","35":"render","36":"id","37":"setId","39":"setName","41":"skipRender","42":"skipMount","43":"skipHydrate","48":"tap","49":"macro","50":"mixin","51":"hasMacro","52":"flushMacros","54":"macroCall","55":"authorize","56":"authorizeForUser","57":"parseAbilityAndArguments","58":"normalizeGuessedAbilityName","59":"authorizeResource","60":"resourceAbilityMap","61":"resourceMethodsWithoutModels","62":"hasProperty","64":"fill","65":"reset","66":"resetExcept","67":"pull","68":"only","69":"except","70":"all","72":"dispatch","73":"redirect","74":"redirectRoute","75":"redirectIntended","76":"redirectAction","77":"stream","79":"setPropertyAttribute","80":"mergeOutsideAttributes","81":"addRulesFromOutside","82":"addMessagesFromOutside","83":"addValidationAttributesFromOutside","85":"addError","86":"setErrorBag","87":"resetErrorBag","88":"clearValidation","89":"resetValidation","90":"errorBagExcept","95":"rulesForModel","96":"hasRuleFor","97":"ruleWithNumbersReplacedByStars","98":"missingRuleFor","99":"withValidator","100":"checkRuleMatchesProperty","101":"validate","102":"isRootComponent","103":"withFormObjectValidators","104":"validateOnly","105":"filterCollectionDataDownToSpecificKeys","107":"shortenModelAttributesInsideValidator","108":"providedOrGlobalRulesMessagesAndAttributes","110":"unwrapDataForValidation","111":"prepareForValidation","113":"js","115":"disableBackButtonCache","116":"enableBackButtonCache"}} 
[2025-10-15 06:47:41] production.INFO: CategoryPreviewModal: Checking existing categories {"shop_id":5,"existing_count":3,"existing_ids":[2,135,154]} 
[2025-10-15 06:47:41] production.INFO: üîç CategoryPreviewModal: detectCategoryConflicts() CALLED {"preview_id":157,"has_import_context":true,"import_context":{"mode":"individual","options":{"product_ids":[4017]}}} 
[2025-10-15 06:47:41] production.INFO: CategoryPreviewModal: Fetching products to check {"mode":"individual","options":{"product_ids":[4017]}} 
[2025-10-15 06:47:41] production.INFO: CategoryPreviewModal: Checking conflicts for products {"shop_id":5,"mode":"individual","product_count":1} 
[2025-10-15 06:47:41] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/products/4017","status_code":200,"execution_time_ms":36.76,"request_size_bytes":2,"response_size_bytes":949,"timestamp":"2025-10-15T06:47:41+00:00"} 
[2025-10-15 06:47:41] production.DEBUG: CategoryPreviewModal: Skipping PrestaShop root category {"prestashop_category_id":2} 
[2025-10-15 06:47:41] production.DEBUG: CategoryPreviewModal: Category not mapped (would be auto-imported) {"prestashop_category_id":135,"shop_id":5} 
[2025-10-15 06:47:41] production.DEBUG: CategoryPreviewModal: Category not mapped (would be auto-imported) {"prestashop_category_id":154,"shop_id":5} 
[2025-10-15 06:47:41] production.INFO: CategoryPreviewModal: Categories extracted and mapped {"prestashop_product_id":4017,"shop_id":5,"prestashop_category_count":3,"mapped_ppm_category_count":0,"ppm_category_ids":[]} 
[2025-10-15 06:47:41] production.INFO: üì¶ CategoryPreviewModal: Product categories after mapping {"prestashop_product_id":4017,"raw_ps_categories":[2,135,154],"mapped_ppm_categories":[]} 
[2025-10-15 06:47:41] production.INFO: ‚úÖ CategoryPreviewModal: Product found by SKU {"prestashop_product_id":4017,"sku":"PPM-TEST","ppm_product_id":10969,"existing_shop_id":1,"importing_to_shop_id":5,"scenario":"CROSS_SHOP_IMPORT"} 
[2025-10-15 06:47:41] production.DEBUG: CategoryPreviewModal: No categories mapped - will check default categories for conflicts {"prestashop_product_id":4017,"ppm_product_id":10969,"existing_shop_id":1} 
[2025-10-15 06:47:41] production.INFO: üîç CategoryPreviewModal: Comparing categories (using mapped PPM IDs) {"product_id":10969,"sku":"PPM-TEST","mapped_ppm_categories":[],"ppm_default_categories":[42,57,58],"ppm_shop_categories":[]} 
[2025-10-15 06:47:41] production.INFO: üîç CategoryPreviewModal: Category comparison results {"product_id":10969,"mapped_ppm_categories":[],"default_categories":[42,57,58],"shop_categories":[],"raw_ps_categories":[2,135,154],"has_default_conflict":true,"has_shop_conflict":false,"has_unmapped_categories":true,"has_conflict":true} 
[2025-10-15 06:47:41] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/2","status_code":200,"execution_time_ms":32.76,"request_size_bytes":2,"response_size_bytes":29246,"timestamp":"2025-10-15T06:47:41+00:00"} 
[2025-10-15 06:47:41] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":2,"name":"Kayo"} 
[2025-10-15 06:47:41] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/135","status_code":200,"execution_time_ms":28.99,"request_size_bytes":2,"response_size_bytes":324,"timestamp":"2025-10-15T06:47:41+00:00"} 
[2025-10-15 06:47:41] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":135,"name":"Buggy"} 
[2025-10-15 06:47:41] production.INFO: PrestaShop API Request {"shop_id":5,"shop_name":"Test KAYO","prestashop_version":"8","method":"GET","url":"https://test.kayomoto.pl/api/categories/154","status_code":200,"execution_time_ms":27.39,"request_size_bytes":2,"response_size_bytes":276,"timestamp":"2025-10-15T06:47:41+00:00"} 
[2025-10-15 06:47:41] production.DEBUG: CategoryPreviewModal: Fetched PrestaShop category name {"category_id":154,"name":"TEST-PPM"} 
[2025-10-15 06:47:41] production.INFO: CategoryPreviewModal: Mapped PrestaShop category IDs to names {"shop_id":5,"category_count":3,"names":["Kayo","Buggy","TEST-PPM"]} 
[2025-10-15 06:47:41] production.WARNING: üö® CategoryPreviewModal: CONFLICT DETECTED! {"product_id":10969,"sku":"PPM-TEST","name":"TEST PPM","import_will_assign":[],"current_default":[42,57,58],"current_shop":[],"raw_ps_categories":[2,135,154],"has_default_conflict":true,"has_shop_conflict":false,"has_unmapped_categories":true} 
[2025-10-15 06:47:41] production.INFO: CategoryPreviewModal: Conflict detection complete {"conflicts_found":1} 
[2025-10-15 06:47:41] production.INFO: CategoryPreviewModal: Opened successfully {"preview_id":157,"shop_name":"Test KAYO","total_categories":0,"selected_count":0,"conflicts_detected":1} 
[2025-10-15 06:47:44] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:47:47] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:47:50] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:47:53] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:47:56] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:47:59] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:02] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:05] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:08] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:11] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:14] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:17] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:20] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:23] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:26] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:29] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:32] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:35] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:38] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:41] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:44] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
[2025-10-15 06:48:47] production.DEBUG: ProductList: Skipping already shown preview {"preview_id":157} 
